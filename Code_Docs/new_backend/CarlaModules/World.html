<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>new_backend.CarlaModules.World API documentation</title>
<meta name="description" content="Carla Modules - World class
Created on March 9th, 2022 â€¦" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>new_backend.CarlaModules.World</code></h1>
</header>
<section id="section-intro">
<p>Carla Modules - World class
Created on March 9th, 2022</p>
<p>Summary: Implements a World class that allows the other CarlaModules to maintain information
about the current state of the Carla world. THIS DIFFERS FROM THE CARLA.WORLD CLASS THAT IS
FOUND THROUGH THE CARLA API. This class originates from the manual_control.py example script
provided with the Carla Python API</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;
Carla Modules - World class
Created on March 9th, 2022

Summary: Implements a World class that allows the other CarlaModules to maintain information
about the current state of the Carla world. THIS DIFFERS FROM THE CARLA.WORLD CLASS THAT IS
FOUND THROUGH THE CARLA API. This class originates from the manual_control.py example script
provided with the Carla Python API

&#34;&#34;&#34;

# Local Imports
from CarlaModules.CameraManager import CameraManager
from CarlaModules.GlobalFunctions import find_weather_presets, get_actor_blueprints, get_actor_display_name
from CarlaModules.Sensors import CollisionSensor, LaneInvasionSensor, GnssSensor, IMUSensor, RadarSensor

# Library Imports
import carla
import random
import re
import sys


class World(object):
    def __init__(self, player, carla_world, hud, args):
        self.world = carla_world
        self.sync = args.sync
        self.actor_role_name = args.rolename
        try:
            self.map = self.world.get_map()
        except RuntimeError as error:
            print(&#39;RuntimeError: {}&#39;.format(error))
            print(&#39;  The server could not send the OpenDRIVE (.xodr) file:&#39;)
            print(&#39;  Make sure it exists, has the same name of your town, and is correct.&#39;)
            sys.exit(1)
        self.hud = hud
        self.player = player
        self.collision_sensor = None
        self.lane_invasion_sensor = None
        self.gnss_sensor = None
        self.imu_sensor = None
        self.radar_sensor = None
        self.camera_manager = None
        self._weather_presets = find_weather_presets()
        self._weather_index = 0
        self._actor_filter = args.filter
        self._actor_generation = args.generation
        self._gamma = args.gamma
        self.restart()
        self.world.on_tick(hud.on_world_tick)
        self.recording_enabled = False
        self.recording_start = 0
        self.constant_velocity_enabled = False
        self.show_vehicle_telemetry = False
        self.current_map_layer = 0
        self.map_layer_names = [
            carla.MapLayer.NONE,
            carla.MapLayer.Buildings,
            carla.MapLayer.Decals,
            carla.MapLayer.Foliage,
            carla.MapLayer.Ground,
            carla.MapLayer.ParkedVehicles,
            carla.MapLayer.Particles,
            carla.MapLayer.Props,
            carla.MapLayer.StreetLights,
            carla.MapLayer.Walls,
            carla.MapLayer.All
        ]

    def restart(self):
        self.player_max_speed = 1.589
        self.player_max_speed_fast = 3.713
        # Keep same camera config if the camera manager exists.
        cam_index = self.camera_manager.index if self.camera_manager is not None else 0
        cam_pos_index = self.camera_manager.transform_index if self.camera_manager is not None else 0
        # Get a random blueprint.
        blueprint = random.choice(get_actor_blueprints(self.world, self._actor_filter, self._actor_generation))
        blueprint.set_attribute(&#39;role_name&#39;, self.actor_role_name)
        if blueprint.has_attribute(&#39;color&#39;):
            color = random.choice(blueprint.get_attribute(&#39;color&#39;).recommended_values)
            blueprint.set_attribute(&#39;color&#39;, color)
        if blueprint.has_attribute(&#39;driver_id&#39;):
            driver_id = random.choice(blueprint.get_attribute(&#39;driver_id&#39;).recommended_values)
            blueprint.set_attribute(&#39;driver_id&#39;, driver_id)
        if blueprint.has_attribute(&#39;is_invincible&#39;):
            blueprint.set_attribute(&#39;is_invincible&#39;, &#39;true&#39;)
        # set the max speed
        if blueprint.has_attribute(&#39;speed&#39;):
            self.player_max_speed = float(blueprint.get_attribute(&#39;speed&#39;).recommended_values[1])
            self.player_max_speed_fast = float(blueprint.get_attribute(&#39;speed&#39;).recommended_values[2])

        # Spawn the player.
        while self.player is None:
            if not self.map.get_spawn_points():
                print(&#39;There are no spawn points available in your map/town.&#39;)
                print(&#39;Please add some Vehicle Spawn Point to your UE4 scene.&#39;)
                sys.exit(1)
            spawn_points = self.map.get_spawn_points()
            spawn_point = random.choice(spawn_points) if spawn_points else carla.Transform()
            self.player = self.world.try_spawn_actor(blueprint, spawn_point)
            self.modify_vehicle_physics(self.player)
        # Set up the sensors.
        self.collision_sensor = CollisionSensor(self.player, self.hud)
        self.lane_invasion_sensor = LaneInvasionSensor(self.player, self.hud)
        self.gnss_sensor = GnssSensor(self.player)
        self.imu_sensor = IMUSensor(self.player)
        self.camera_manager = CameraManager(self.player, self.hud, self._gamma)
        self.camera_manager.transform_index = cam_pos_index
        self.camera_manager.set_sensor(cam_index, notify=False)
        actor_type = get_actor_display_name(self.player)
        self.hud.notification(actor_type)

        if self.sync:
            self.world.tick()
        else:
            self.world.wait_for_tick()

    def next_weather(self, reverse=False):
        self._weather_index += -1 if reverse else 1
        self._weather_index %= len(self._weather_presets)
        preset = self._weather_presets[self._weather_index]
        self.hud.notification(&#39;Weather: %s&#39; % preset[1])
        self.player.get_world().set_weather(preset[0])

    def next_map_layer(self, reverse=False):
        self.current_map_layer += -1 if reverse else 1
        self.current_map_layer %= len(self.map_layer_names)
        selected = self.map_layer_names[self.current_map_layer]
        self.hud.notification(&#39;LayerMap selected: %s&#39; % selected)

    def load_map_layer(self, unload=False):
        selected = self.map_layer_names[self.current_map_layer]
        if unload:
            self.hud.notification(&#39;Unloading map layer: %s&#39; % selected)
            self.world.unload_map_layer(selected)
        else:
            self.hud.notification(&#39;Loading map layer: %s&#39; % selected)
            self.world.load_map_layer(selected)

    def toggle_radar(self):
        if self.radar_sensor is None:
            self.radar_sensor = RadarSensor(self.player)
        elif self.radar_sensor.sensor is not None:
            self.radar_sensor.sensor.destroy()
            self.radar_sensor = None

    def modify_vehicle_physics(self, actor):
        #If actor is not a vehicle, we cannot use the physics control
        try:
            physics_control = actor.get_physics_control()
            physics_control.use_sweep_wheel_collision = True
            actor.apply_physics_control(physics_control)
        except Exception:
            pass

    def tick(self, clock, ego_vehicle):
        self.hud.tick(self, clock, ego_vehicle)

    def render(self, display):
        self.camera_manager.render(display)
        self.hud.render(display)

    def destroy_sensors(self):
        self.camera_manager.sensor.destroy()
        self.camera_manager.sensor = None
        self.camera_manager.index = None

    def destroy(self):
        if self.radar_sensor is not None:
            self.toggle_radar()
        sensors = [
            self.camera_manager.sensor,
            self.collision_sensor.sensor,
            self.lane_invasion_sensor.sensor,
            self.gnss_sensor.sensor,
            self.imu_sensor.sensor]
        for sensor in sensors:
            if sensor is not None:
                sensor.stop()
                sensor.destroy()
        if self.player is not None:
            self.player.destroy()</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="new_backend.CarlaModules.World.World"><code class="flex name class">
<span>class <span class="ident">World</span></span>
<span>(</span><span>player, carla_world, hud, args)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class World(object):
    def __init__(self, player, carla_world, hud, args):
        self.world = carla_world
        self.sync = args.sync
        self.actor_role_name = args.rolename
        try:
            self.map = self.world.get_map()
        except RuntimeError as error:
            print(&#39;RuntimeError: {}&#39;.format(error))
            print(&#39;  The server could not send the OpenDRIVE (.xodr) file:&#39;)
            print(&#39;  Make sure it exists, has the same name of your town, and is correct.&#39;)
            sys.exit(1)
        self.hud = hud
        self.player = player
        self.collision_sensor = None
        self.lane_invasion_sensor = None
        self.gnss_sensor = None
        self.imu_sensor = None
        self.radar_sensor = None
        self.camera_manager = None
        self._weather_presets = find_weather_presets()
        self._weather_index = 0
        self._actor_filter = args.filter
        self._actor_generation = args.generation
        self._gamma = args.gamma
        self.restart()
        self.world.on_tick(hud.on_world_tick)
        self.recording_enabled = False
        self.recording_start = 0
        self.constant_velocity_enabled = False
        self.show_vehicle_telemetry = False
        self.current_map_layer = 0
        self.map_layer_names = [
            carla.MapLayer.NONE,
            carla.MapLayer.Buildings,
            carla.MapLayer.Decals,
            carla.MapLayer.Foliage,
            carla.MapLayer.Ground,
            carla.MapLayer.ParkedVehicles,
            carla.MapLayer.Particles,
            carla.MapLayer.Props,
            carla.MapLayer.StreetLights,
            carla.MapLayer.Walls,
            carla.MapLayer.All
        ]

    def restart(self):
        self.player_max_speed = 1.589
        self.player_max_speed_fast = 3.713
        # Keep same camera config if the camera manager exists.
        cam_index = self.camera_manager.index if self.camera_manager is not None else 0
        cam_pos_index = self.camera_manager.transform_index if self.camera_manager is not None else 0
        # Get a random blueprint.
        blueprint = random.choice(get_actor_blueprints(self.world, self._actor_filter, self._actor_generation))
        blueprint.set_attribute(&#39;role_name&#39;, self.actor_role_name)
        if blueprint.has_attribute(&#39;color&#39;):
            color = random.choice(blueprint.get_attribute(&#39;color&#39;).recommended_values)
            blueprint.set_attribute(&#39;color&#39;, color)
        if blueprint.has_attribute(&#39;driver_id&#39;):
            driver_id = random.choice(blueprint.get_attribute(&#39;driver_id&#39;).recommended_values)
            blueprint.set_attribute(&#39;driver_id&#39;, driver_id)
        if blueprint.has_attribute(&#39;is_invincible&#39;):
            blueprint.set_attribute(&#39;is_invincible&#39;, &#39;true&#39;)
        # set the max speed
        if blueprint.has_attribute(&#39;speed&#39;):
            self.player_max_speed = float(blueprint.get_attribute(&#39;speed&#39;).recommended_values[1])
            self.player_max_speed_fast = float(blueprint.get_attribute(&#39;speed&#39;).recommended_values[2])

        # Spawn the player.
        while self.player is None:
            if not self.map.get_spawn_points():
                print(&#39;There are no spawn points available in your map/town.&#39;)
                print(&#39;Please add some Vehicle Spawn Point to your UE4 scene.&#39;)
                sys.exit(1)
            spawn_points = self.map.get_spawn_points()
            spawn_point = random.choice(spawn_points) if spawn_points else carla.Transform()
            self.player = self.world.try_spawn_actor(blueprint, spawn_point)
            self.modify_vehicle_physics(self.player)
        # Set up the sensors.
        self.collision_sensor = CollisionSensor(self.player, self.hud)
        self.lane_invasion_sensor = LaneInvasionSensor(self.player, self.hud)
        self.gnss_sensor = GnssSensor(self.player)
        self.imu_sensor = IMUSensor(self.player)
        self.camera_manager = CameraManager(self.player, self.hud, self._gamma)
        self.camera_manager.transform_index = cam_pos_index
        self.camera_manager.set_sensor(cam_index, notify=False)
        actor_type = get_actor_display_name(self.player)
        self.hud.notification(actor_type)

        if self.sync:
            self.world.tick()
        else:
            self.world.wait_for_tick()

    def next_weather(self, reverse=False):
        self._weather_index += -1 if reverse else 1
        self._weather_index %= len(self._weather_presets)
        preset = self._weather_presets[self._weather_index]
        self.hud.notification(&#39;Weather: %s&#39; % preset[1])
        self.player.get_world().set_weather(preset[0])

    def next_map_layer(self, reverse=False):
        self.current_map_layer += -1 if reverse else 1
        self.current_map_layer %= len(self.map_layer_names)
        selected = self.map_layer_names[self.current_map_layer]
        self.hud.notification(&#39;LayerMap selected: %s&#39; % selected)

    def load_map_layer(self, unload=False):
        selected = self.map_layer_names[self.current_map_layer]
        if unload:
            self.hud.notification(&#39;Unloading map layer: %s&#39; % selected)
            self.world.unload_map_layer(selected)
        else:
            self.hud.notification(&#39;Loading map layer: %s&#39; % selected)
            self.world.load_map_layer(selected)

    def toggle_radar(self):
        if self.radar_sensor is None:
            self.radar_sensor = RadarSensor(self.player)
        elif self.radar_sensor.sensor is not None:
            self.radar_sensor.sensor.destroy()
            self.radar_sensor = None

    def modify_vehicle_physics(self, actor):
        #If actor is not a vehicle, we cannot use the physics control
        try:
            physics_control = actor.get_physics_control()
            physics_control.use_sweep_wheel_collision = True
            actor.apply_physics_control(physics_control)
        except Exception:
            pass

    def tick(self, clock, ego_vehicle):
        self.hud.tick(self, clock, ego_vehicle)

    def render(self, display):
        self.camera_manager.render(display)
        self.hud.render(display)

    def destroy_sensors(self):
        self.camera_manager.sensor.destroy()
        self.camera_manager.sensor = None
        self.camera_manager.index = None

    def destroy(self):
        if self.radar_sensor is not None:
            self.toggle_radar()
        sensors = [
            self.camera_manager.sensor,
            self.collision_sensor.sensor,
            self.lane_invasion_sensor.sensor,
            self.gnss_sensor.sensor,
            self.imu_sensor.sensor]
        for sensor in sensors:
            if sensor is not None:
                sensor.stop()
                sensor.destroy()
        if self.player is not None:
            self.player.destroy()</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="new_backend.CarlaModules.World.World.destroy"><code class="name flex">
<span>def <span class="ident">destroy</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def destroy(self):
    if self.radar_sensor is not None:
        self.toggle_radar()
    sensors = [
        self.camera_manager.sensor,
        self.collision_sensor.sensor,
        self.lane_invasion_sensor.sensor,
        self.gnss_sensor.sensor,
        self.imu_sensor.sensor]
    for sensor in sensors:
        if sensor is not None:
            sensor.stop()
            sensor.destroy()
    if self.player is not None:
        self.player.destroy()</code></pre>
</details>
</dd>
<dt id="new_backend.CarlaModules.World.World.destroy_sensors"><code class="name flex">
<span>def <span class="ident">destroy_sensors</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def destroy_sensors(self):
    self.camera_manager.sensor.destroy()
    self.camera_manager.sensor = None
    self.camera_manager.index = None</code></pre>
</details>
</dd>
<dt id="new_backend.CarlaModules.World.World.load_map_layer"><code class="name flex">
<span>def <span class="ident">load_map_layer</span></span>(<span>self, unload=False)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def load_map_layer(self, unload=False):
    selected = self.map_layer_names[self.current_map_layer]
    if unload:
        self.hud.notification(&#39;Unloading map layer: %s&#39; % selected)
        self.world.unload_map_layer(selected)
    else:
        self.hud.notification(&#39;Loading map layer: %s&#39; % selected)
        self.world.load_map_layer(selected)</code></pre>
</details>
</dd>
<dt id="new_backend.CarlaModules.World.World.modify_vehicle_physics"><code class="name flex">
<span>def <span class="ident">modify_vehicle_physics</span></span>(<span>self, actor)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def modify_vehicle_physics(self, actor):
    #If actor is not a vehicle, we cannot use the physics control
    try:
        physics_control = actor.get_physics_control()
        physics_control.use_sweep_wheel_collision = True
        actor.apply_physics_control(physics_control)
    except Exception:
        pass</code></pre>
</details>
</dd>
<dt id="new_backend.CarlaModules.World.World.next_map_layer"><code class="name flex">
<span>def <span class="ident">next_map_layer</span></span>(<span>self, reverse=False)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def next_map_layer(self, reverse=False):
    self.current_map_layer += -1 if reverse else 1
    self.current_map_layer %= len(self.map_layer_names)
    selected = self.map_layer_names[self.current_map_layer]
    self.hud.notification(&#39;LayerMap selected: %s&#39; % selected)</code></pre>
</details>
</dd>
<dt id="new_backend.CarlaModules.World.World.next_weather"><code class="name flex">
<span>def <span class="ident">next_weather</span></span>(<span>self, reverse=False)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def next_weather(self, reverse=False):
    self._weather_index += -1 if reverse else 1
    self._weather_index %= len(self._weather_presets)
    preset = self._weather_presets[self._weather_index]
    self.hud.notification(&#39;Weather: %s&#39; % preset[1])
    self.player.get_world().set_weather(preset[0])</code></pre>
</details>
</dd>
<dt id="new_backend.CarlaModules.World.World.render"><code class="name flex">
<span>def <span class="ident">render</span></span>(<span>self, display)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def render(self, display):
    self.camera_manager.render(display)
    self.hud.render(display)</code></pre>
</details>
</dd>
<dt id="new_backend.CarlaModules.World.World.restart"><code class="name flex">
<span>def <span class="ident">restart</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def restart(self):
    self.player_max_speed = 1.589
    self.player_max_speed_fast = 3.713
    # Keep same camera config if the camera manager exists.
    cam_index = self.camera_manager.index if self.camera_manager is not None else 0
    cam_pos_index = self.camera_manager.transform_index if self.camera_manager is not None else 0
    # Get a random blueprint.
    blueprint = random.choice(get_actor_blueprints(self.world, self._actor_filter, self._actor_generation))
    blueprint.set_attribute(&#39;role_name&#39;, self.actor_role_name)
    if blueprint.has_attribute(&#39;color&#39;):
        color = random.choice(blueprint.get_attribute(&#39;color&#39;).recommended_values)
        blueprint.set_attribute(&#39;color&#39;, color)
    if blueprint.has_attribute(&#39;driver_id&#39;):
        driver_id = random.choice(blueprint.get_attribute(&#39;driver_id&#39;).recommended_values)
        blueprint.set_attribute(&#39;driver_id&#39;, driver_id)
    if blueprint.has_attribute(&#39;is_invincible&#39;):
        blueprint.set_attribute(&#39;is_invincible&#39;, &#39;true&#39;)
    # set the max speed
    if blueprint.has_attribute(&#39;speed&#39;):
        self.player_max_speed = float(blueprint.get_attribute(&#39;speed&#39;).recommended_values[1])
        self.player_max_speed_fast = float(blueprint.get_attribute(&#39;speed&#39;).recommended_values[2])

    # Spawn the player.
    while self.player is None:
        if not self.map.get_spawn_points():
            print(&#39;There are no spawn points available in your map/town.&#39;)
            print(&#39;Please add some Vehicle Spawn Point to your UE4 scene.&#39;)
            sys.exit(1)
        spawn_points = self.map.get_spawn_points()
        spawn_point = random.choice(spawn_points) if spawn_points else carla.Transform()
        self.player = self.world.try_spawn_actor(blueprint, spawn_point)
        self.modify_vehicle_physics(self.player)
    # Set up the sensors.
    self.collision_sensor = CollisionSensor(self.player, self.hud)
    self.lane_invasion_sensor = LaneInvasionSensor(self.player, self.hud)
    self.gnss_sensor = GnssSensor(self.player)
    self.imu_sensor = IMUSensor(self.player)
    self.camera_manager = CameraManager(self.player, self.hud, self._gamma)
    self.camera_manager.transform_index = cam_pos_index
    self.camera_manager.set_sensor(cam_index, notify=False)
    actor_type = get_actor_display_name(self.player)
    self.hud.notification(actor_type)

    if self.sync:
        self.world.tick()
    else:
        self.world.wait_for_tick()</code></pre>
</details>
</dd>
<dt id="new_backend.CarlaModules.World.World.tick"><code class="name flex">
<span>def <span class="ident">tick</span></span>(<span>self, clock, ego_vehicle)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def tick(self, clock, ego_vehicle):
    self.hud.tick(self, clock, ego_vehicle)</code></pre>
</details>
</dd>
<dt id="new_backend.CarlaModules.World.World.toggle_radar"><code class="name flex">
<span>def <span class="ident">toggle_radar</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def toggle_radar(self):
    if self.radar_sensor is None:
        self.radar_sensor = RadarSensor(self.player)
    elif self.radar_sensor.sensor is not None:
        self.radar_sensor.sensor.destroy()
        self.radar_sensor = None</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="new_backend.CarlaModules" href="index.html">new_backend.CarlaModules</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="new_backend.CarlaModules.World.World" href="#new_backend.CarlaModules.World.World">World</a></code></h4>
<ul class="">
<li><code><a title="new_backend.CarlaModules.World.World.destroy" href="#new_backend.CarlaModules.World.World.destroy">destroy</a></code></li>
<li><code><a title="new_backend.CarlaModules.World.World.destroy_sensors" href="#new_backend.CarlaModules.World.World.destroy_sensors">destroy_sensors</a></code></li>
<li><code><a title="new_backend.CarlaModules.World.World.load_map_layer" href="#new_backend.CarlaModules.World.World.load_map_layer">load_map_layer</a></code></li>
<li><code><a title="new_backend.CarlaModules.World.World.modify_vehicle_physics" href="#new_backend.CarlaModules.World.World.modify_vehicle_physics">modify_vehicle_physics</a></code></li>
<li><code><a title="new_backend.CarlaModules.World.World.next_map_layer" href="#new_backend.CarlaModules.World.World.next_map_layer">next_map_layer</a></code></li>
<li><code><a title="new_backend.CarlaModules.World.World.next_weather" href="#new_backend.CarlaModules.World.World.next_weather">next_weather</a></code></li>
<li><code><a title="new_backend.CarlaModules.World.World.render" href="#new_backend.CarlaModules.World.World.render">render</a></code></li>
<li><code><a title="new_backend.CarlaModules.World.World.restart" href="#new_backend.CarlaModules.World.World.restart">restart</a></code></li>
<li><code><a title="new_backend.CarlaModules.World.World.tick" href="#new_backend.CarlaModules.World.World.tick">tick</a></code></li>
<li><code><a title="new_backend.CarlaModules.World.World.toggle_radar" href="#new_backend.CarlaModules.World.World.toggle_radar">toggle_radar</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>